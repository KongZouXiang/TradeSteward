<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <link rel="Bookmark" href="/favicon.ico">
    <link rel="Shortcut Icon" href="/favicon.ico"/>
    <!--[if lt IE 9]>
    <script type="text/javascript" src="/lib/html5shiv.js"></script>
    <script type="text/javascript" src="/lib/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/h-ui/css/H-ui.min.css"/>
    <link rel="stylesheet" type="text/css" href="/h-ui.admin/css/H-ui.admin.css"/>
    <link rel="stylesheet" type="text/css" href="/lib/Hui-iconfont/1.0.8/iconfont.css"/>
    <link rel="stylesheet" type="text/css" href="/h-ui.admin/skin/default/skin.css" id="skin"/>
    <link rel="stylesheet" type="text/css" href="/h-ui.admin/css/style.css"/>
    <link href="/1.0.9/iconfont.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="/js/vue/vue.min.js"></script>
    <script type="text/javascript" src="/js/laypage/laypage.js"></script>
    <!--[if IE 6]>
    <script type="text/javascript" src="/static/lib/DD_belatedPNG_0.0.8a-min.js"></script>
    <script>DD_belatedPNG.fix('*');</script>
    <![endif]-->
    <title>仓库列表</title>
</head>
<body>
<nav class="breadcrumb"><i class="Hui-iconfont">&#xe67f;</i> 首页 <span class="c-gray en">&gt;</span> 仓库管理 <span
        class="c-gray en">&gt;</span> 仓库列表 <a class="btn btn-success radius r" style="line-height:1.6em;margin-top:3px"
                                              href="javascript:location.replace(location.href);" title="刷新"><i
        class="Hui-iconfont">&#xe68f;</i></a></nav>
<div class="page-container" id="app">
    <div class="text-c">
        <input type="text" class="input-text" style="width:250px" placeholder="搜索编号、名称、联系人、电话..." id="aa" name="">
        <button type="submit" class="btn btn-success" id="bb" name="" @click="findWare()"><i class="Hui-iconfont">&#xe665;</i>搜索仓库
        </button>
    </div>
    <div class="cl pd-5 bg-1 bk-gray mt-20"> <span class="l"><a href="javascript:;" onclick="datadel()"
                                                                class="btn btn-danger radius" id="deleteall"><i
            class="Hui-iconfont">&#xe6e2;</i> 批量删除</a>
        <a href="javascript:;" onclick="admin_add('添加仓库','admin-add.html','800','500')" class="btn btn-primary radius"
           @click="addWare()">
            <i class="Hui-iconfont">&#xe600;</i>
            添加仓库
        </a>
    </span>

        <span class="r">共有数据：
            <strong>{{count}}</strong> 条</span></div>
    <table class="table table-border table-bordered table-bg">
        <thead>
        <tr>
            <th scope="col" colspan="9" width="100%">仓库列表</th>
        </tr>
        <tr class="text-c">
            <th width="25"><input type="checkbox" id="checkAll" title="全选"></th>
            <th width="40">序号</th>
            <th width="150">操作</th>
            <th width="90">编号</th>
            <th width="150">名称</th>
            <th width="150">联系人</th>
            <th width="130">联系电话</th>
            <th width="90">状态</th>
            <th width="90">启/禁用</th>
        </tr>
        </thead>
        <tbody v-for="(item,index) in result">
        <tr class="text-c" >
            <td><input type="checkbox" name="aid" :value="item.id" id="ss"></td>
            <td>{{index+1}}</td>
            <td>
                <a href="#" @click="detail(index)" class="Hui-iconfont Hui-iconfont-gengduo3" title="详细"></a>
                <a href="#" @click="EditWarHouse(item.id)" class="Hui-iconfont Hui-iconfont-edit" title="编辑"></a>
                <a href="#" @click="deletea(item.id)" class="Hui-iconfont Hui-iconfont-del3" title="删除"></a>
            </td>
            <td>{{item.wmNumber}}</td>
            <td>{{item.wmName}}</td>
            <td>{{item.wmPerson}}</td>
            <td>{{item.wmTel}}</td>
            <td v-if="item.wmState===1">
                启用
            </td>
            <td v-else>
                禁用
            </td>

        </tr>
        <tr class='row0_detail' style="display: none">
            <td height='75px'colspan='11'>
                <div style="border-bottom:1px solid #b2b2b2;height: 25px">仓库名称:<span>{{item.wmName}}</span>
                    仓库编号:<span>{{item.wmNumber}}</span></div>
                <div style="height: 25px ">
                    <div style="width: 25%;float: left">联系电话:<span>{{item.wmTel}}</span></div>
                    <div style="width: 25%;float: left">联系人:<span>{{item.wmPerson}}</span></div>
                    <div style="width: 25%;float: left">邮箱:<span>{{item.wmPostcode}}</span></div>
                    <div style="width: 25%;float: left">备注:<span>{{item.wmRemark}}</span></div></div>
                <div style="height: 25px">
                    <div style="width: 25%;float: left">仓库地址:<span>{{item.wmAddress}}</span></div>

                    <div style="width: 25%;float: left">状态:<span>
            <a v-if="item.wmState===1">
                启用
            </a>
            <a v-else>
                禁用
            </a></span></div>
                </div>
            </td>
        </tr>
        <!--<tr class="row0_detail" style="display: block">
            <td colspan="20" align="left">
            &lt;!&ndash;<div style="text-align:center;">&ndash;&gt;

            <table class="table table-bg" style="display: none;text-align:center;" id="details">
                <tr>
                    <th>仓库名:
                    <td>{{item.wmName}}</td>
                    </th>
                    <th>仓库编号:
                    <td>{{item.wmNumber}}</td>
                    </th>
                </tr>
                <tr>
                    <th>状态:</th>
                    <th v-if="item.wmState===1">
                        启用
                    </th>
                    <th v-else>
                        禁用
                    </th>
                    <td>联系人:</td>
                    <th>{{item.wmPerson}}</th>
                    <th>联系电话:{{item.wmTel}}</th>
                </tr>
                <tr>
                    <th>邮箱:</th>
                    <th>{{item.wmPostcode}}</th>
                    <th>仓库地址:</th>
                    <th>{{item.wmAddress}}</th>
                    <th>备注:</th>
                    <th>{{item.wmRemark}}</th>
                </tr>
            </table>
            </td>
        </tr>-->
        </tbody>
    </table>

    <div id="pagenav" style="text-align:center;position: fixed;left: 0px;width: 100%;"></div>
</div>
<!--_footer 作为公共模版分离出去-->
<script type="text/javascript" src="/lib/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="/lib/layer/2.4/layer.js"></script>
<script type="text/javascript" src="/h-ui/js/H-ui.min.js"></script>
<script type="text/javascript" src="/h-ui.admin/js/H-ui.admin.js"></script> <!--/_footer 作为公共模版分离出去-->

<!--请在下方写此页面业务相关的脚本-->
<script type="text/javascript" src="/lib/My97DatePicker/4.8/WdatePicker.js"></script>
<script type="text/javascript" src="/lib/datatables/1.10.0/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="/lib/laypage/1.2/laypage.js"></script>
<script type="text/javascript">
    $('#modalalertdemo').on('click', function () {
        $.Huimodalalert('我是消息框，2秒后我自动滚蛋！', 2000)
    });
    /*
        参数解释：
        title	标题
        url		请求的url
        id		需要操作的数据id
        w		弹出层宽度（缺省调默认值）
        h		弹出层高度（缺省调默认值）
    */
    var app = new Vue({
        el: '#app',
        data: {
            result: [],
            results: [],
            count: []
        }
    });

    var getUserPageList = function (curr) {
        $.ajax({
            type: 'get',
            dataType: 'json',
            url: '/basicdata/warehouse-management/select',
            data: {
                data: $("#aa").val(),
                pageNum: curr || 1,
                pageSize: 2
            },
            success: function (msg) {
                console.log(msg.count);
                app.result = msg.list;
                console.log(app.result);
                app.count = msg.count;
                laypage({
                    cont: 'pagenav',
                    pages: msg.totalPage,
                    first: '首页',
                    last: '尾页',
                    skin: '#00A0E9',
                    curr: curr || 1,
                    jump: function (obj, first) {
                        if (!first) {
                            getUserPageList(obj.curr);
                        }
                    }
                });
            }
        });
    };
    getUserPageList();
    /*删除仓库*/
    var deletea = function (id) {
        //询问框
        layer.confirm('您确定要删除么？', {
            btn: ['是', '否']
            //按钮
        }, function () {
            //是
            $.ajax({
                type: "get",
                dataType: "json",
                url: "/basicdata/warehouse-management/deletebyid",
                data: {
                    id: id
                },
                success: function (msg) {
                    layer.msg('已经成功删除记录', {icon: 5});
                    layer.close();
                    getUserPageList();
                }
            });
        }, function () {
            //否
            layer.close(true);
        });
    };
    /*模糊查询*/
    var findWare = function () {
        getUserPageList();
    };
    /*增加仓库*/
    var addWare = function () {
        layer.open({
            type: 2,
            title: '添加仓库',
            fix: false,
            maxmin: true,
            shadeClose: true,
            area: ['1000px', '500px'],
            content: '/basicdata/warehouse-management/addWare',
            end: function () {
                getUserPageList();
                $.Huimodalalert('添加成功', 2000)
            }
        });
    };
    /*编辑仓库*/
    var EditWarHouse = function (id) {
        layer.open({
            type: 2,
            title: '编辑仓库',
            fix: false,
            maxmin: true,
            shadeClose: true,
            area: ['1000px', '500px'],
            /* content:'http://localhost:8080/basicdata/editWareHouse.html',*/
            content: '/basicdata/warehouse-management/UpdateWareHouse?id='+id,
            end: function () {
                getUserPageList();
                $.Huimodalalert('√修改成功！', 2000)
            }
        });
    }
    /*详细*/
    var detail = function (i) {
        /* $.ajax({
             type:'post',
             dataType:'json',
             url:'/basicdata/warehouse-management/selectByid',
             data:{
                 id:id
             },
             success:function(msg) {
                 app.results = msg.data;
                 console.log(app.results)
             },
         });*/
        var a = $(".row0_detail")
        if (a[i].style.display == "none") {
            a[i].style.display = "";
        } else {
            a[i].style.display = "none";
        }
        /*详细*/
        /*var s=document.getElementById("details")
        if(s.style.display=="none"){
            s.style.display="block"
        }else {s.style.display="none"};*/
    }
    /*禁用仓库*/
    var jinyonh = function (id) {
        $.ajax({
            type: 'post',
            dataType: 'json',
            url: '/basicdata/warehouse-management/updatestatejin',
            data: {
                id: id
            },
            success: function (msg) {
                $.Huimodalalert('已禁用', 2000);
                getUserPageList();
            }
        })
    }
    /*启用仓库*/
    var qiyong = function (id) {
        $.ajax({
            type: 'post',
            dateType: 'json',
            url: '/basicdata/warehouse-management/updatestateqi',
            data: {
                id: id,
            },
            success: function (msg) {
                $.Huimodalalert('已启用', 2000);
                getUserPageList();
            }
        })
    }
    var caozuo = function (id) {
        alert(id)
    }
    /*批量删除*/
    $("#deleteall").click(function () {
        /**获取下面选中的checkbox*/
        var checkedbox = $("input[id^='ss']:checked");
        if (checkedbox.length == 0) {
            alert("请选择要删除的商品！！！");
        } else {
            if (confirm("你确定要删除吗？？？")) {
                var ids = new Array();
                checkedbox.each(function () {
                    ids.push(this.value);
                });
                $.ajax({
                    type: 'POST',
                    dataType: 'json',
                    contentType: 'application/json',
                    url: '/basicdata/warehouse-management/deleteall',
                    data: JSON.stringify(ids),
                    success: function (msg) {
                        if (msg) {
                            layer.msg('成功删除', {icon: 5});
                        }
                        getUserPageList();
                    }
                })
            }
        }
    })
</script>
</body>
</html>